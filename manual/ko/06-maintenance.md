# 제 7장: 점검 관리 (Maintenance Management)

점검은 유저들에게 가장 큰 불편을 주는 작업이므로, 정확한 시간 안내와 안정적인 종료가 생명입니다.

**경로:** 관리 (Admin) → 점검 (Maintenance)  
**필요 권한:** `maintenance_manage`

---

## 1. 점검의 종류와 절차

### 🔵 정기 점검 (Scheduled Maintenance)
매주 또는 격주로 진행하는 업데이트 점검입니다.

**시나리오:**
1. **D-1일:** 점검 예약을 설정합니다. (시작: 10:00, 종료: 12:00)
2. **D-1일:** "내일 오전 10시부터 점검이 있습니다"라는 **공지사항**을 미리 띄웁니다.
3. **D-Day 09:30:** 점검 시작 30분 전, 인게임 공지(Notice)로 "곧 점검이 시작됩니다. 안전한 곳에서 종료해 주세요"라고 알립니다.
4. **D-Day 10:00:** 시스템이 자동으로 점검 모드로 전환됩니다. 모든 유저는 접속이 끊깁니다.
5. **D-Day 11:50:** QA팀이 화이트리스트 계정으로 접속하여 최종 테스트를 합니다.
6. **D-Day 12:00:** 점검이 자동 종료되거나, 수동으로 **[점검 종료]**를 누릅니다.

### 🔴 긴급 점검 (Emergency Maintenance)
서버가 터졌거나 돈 복사 버그가 발견되었을 때 씁니다.

**시나리오:**
1. 대시보드 **[즉시 점검 시작]** 버튼을 누릅니다.
2. 메시지에 사유를 적습니다: "서버 불안정 현상 수정 중"
3. 예상 종료 시간을 여유 있게(2~3시간) 잡습니다. (짧게 잡고 계속 연장하는 것보다 낫습니다)
4. **[시작]** 클릭. (즉시 모든 유저 차단)
5. 문제 해결 후 **조기 종료**합니다.

---

## 2. 화이트리스트 (WhiteList) 200% 활용하기

점검 중에는 일반 유저는 "점검 중입니다" 페이지만 봅니다. 하지만 개발자와 운영자는 게임에 들어가봐야 합니다.

**누구를 등록해야 하나요?**
- **QA 팀 (필수):** 업데이트된 기능이 잘 작동하나 확인
- **마켓 검수 계정 (필수):** 애플/구글 리뷰어가 "접속이 안 돼요"라며 리젝(Reject) 놓는 것을 방지
- **운영팀:** 공지사항 팝업 등이 잘 뜨는지 확인

**등록 방법 3가지:**
1. **IP 주소:** 사내 고정 IP (가장 편함. 회사 내 모든 사람이 접속 가능)
2. **User ID (UUID):** 재택 근무자나 QA팀 계정 ID
3. **Device ID:** 특정 테스트 기기

> **팁:** 애플 앱스토어 심사를 넣을 때는, **애플 심사 팀이 접속하는 IP(미국 대역)**를 알 수 없으므로, 심사 제출용 **테스트 계정의 ID**를 화이트리스트에 넣어둬야 합니다. (매우 중요!)

---

## 3. 점검 연장 vs 조기 종료

### 점검 연장 (Extension)
예정된 시간보다 작업이 길어질 때입니다.

1. 점검 화면에서 현재 진행 중인 점검의 **[수정]** 버튼 클릭
2. 종료 시간을 12:00 → 13:00으로 변경
3. 메시지도 수정: "작업 지연으로 인해 1시간 연장합니다. 죄송합니다." (사과 멘트 추가)
4. **[저장]**

> **주의:** 종료 1분 전에 연장하면 유저들이 폭동을 일으킵니다. 최소 **30분 전**에 연장 공지를 하고 시간을 수정하세요.

### 조기 종료 (Early Finish)
예상보다 작업이 빨리 끝났을 때입니다.

1. **[점검 종료]** 버튼 클릭
2. 즉시 서버가 오픈됩니다.
3. 유저들에게 "점검이 조기 종료되었습니다"라고 공지하면 칭찬받습니다.

---

## 4. 자주 묻는 질문 (FAQ)

**Q: 점검 시간을 예약했는데, 시작 시간이 되어도 점검이 안 걸려요.**  
A: 대시보드의 **서버 시간(Server Time)**과 현재 시간이 일치하는지 확인하세요. 설정된 시간대(Timezone)가 UTC인지 KST인지 확인이 필요합니다. (보통 시스템 설정에 있습니다.)

**Q: 점검 중인데 일부 유저가 접속해 있어요.**  
A: 해당 유저가 **화이트리스트**에 등록된 IP를 사용 중이거나, 기존 세션이 끊어지지 않은 경우일 수 있습니다. **서버 관리 > 킥(Kick)** 명령으로 강제 종료시킬 수 있습니다.

---

**이전 장:** [← 제 6장: 게임 월드 관리](05-game-worlds.md)  
**다음 장:** [제 8장: 공지사항 관리 →](07-service-notices.md)
