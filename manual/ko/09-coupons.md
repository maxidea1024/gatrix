# 제 9장: 쿠폰 관리 (Coupon Management)

쿠폰은 마케팅, 보상, 프로모션에 필수적인 기능입니다. 이벤트 보상, 사전 예약 혜택, 협찬 코드 등 다양한 용도로 활용됩니다.

**경로:** 게임 관리 (Game) → 쿠폰 → 쿠폰 정의 (Coupon Definitions)  
**필요 권한:** `coupons.manage`

---

## 1. 화면 구성

쿠폰 관리 페이지의 전체 화면입니다.

![쿠폰 목록 화면](images/coupons-list.png)

### 상단 툴바 버튼 설명

| 버튼 | 설명 |
|------|------|
| **쿠폰 생성** | 새로운 쿠폰을 정의합니다. |
| **SDK 연동 가이드** | 클라이언트에서 쿠폰을 사용하는 API 문서를 제공합니다. |

### 테이블 컬럼 설명

| 컬럼 | 설명 |
|------|------|
| **이름** | 쿠폰 이름 (관리용) |
| **쿠폰 코드** | 실제 사용되는 쿠폰 코드 또는 코드 패턴 |
| **유형** | NORMAL(대량생성) / SPECIAL(키워드) |
| **참여 보상** | 쿠폰 사용 시 지급되는 보상 |
| **사용률** | 사용된 코드 수 / 전체 발행 수 |
| **시작** | 쿠폰 유효 시작일 |
| **종료** | 쿠폰 유효 종료일 |
| **생성일 / 상태** | 생성 일시 및 현재 상태 |
| **작업** | 코드 확인, ✏️ 편집, 🗑️ 삭제 버튼 |

---

## 2. 쿠폰 생성하기

**[쿠폰 생성]** 버튼을 클릭하면 아래와 같은 폼이 나타납니다.

![쿠폰 생성 폼](images/coupons-add-form.png)

### 입력 항목 상세 설명

| 섹션 | 항목 | 필수 | 설명 |
|------|------|:----:|------|
| **기본 설정** | 사용중 | ✅ | 쿠폰 활성화 여부 |
| **기본 정보** | 이름 | ✅ | 쿠폰 이름 (관리용) |
| | 설명 | | 쿠폰에 대한 부가 설명 |
| **대상 지정** | 대상 플랫폼 | | 사용 가능한 플랫폼 제한 |
| | 대상 채널 | | 사용 가능한 채널 제한 |
| **코드 및 수량** | 유형 | ✅ | NORMAL(대량생성) / SPECIAL(키워드) |
| | 코드 패턴 | | NORMAL 선택 시 코드 생성 패턴 (영문+숫자 등) |
| | 코드 | | SPECIAL 선택 시 사용할 코드 직접 입력 |
| | 발행 수량 | | NORMAL: 생성할 수량 / SPECIAL: 전체 사용 가능 횟수 |
| **사용 제한** | 유저별 사용 횟수 | | SPECIAL 타입에서 유저당 사용 횟수 제한 |
| | 사용 가능 기간 | | 쿠폰 유효 기간 (시작~종료) |

---

## 3. 쿠폰 유형 이해
 
### NORMAL (대량 생성 쿠폰)

다수의 **난수 코드(시리얼 번호)**를 대량으로 생성합니다. 각 코드는 **1회용**이며, 누군가 사용하면 소멸됩니다.

```mermaid
flowchart LR
    A[발행: 3장] --> B[코드1: ABC1-2345]
    A --> C[코드2: DEF6-7890]
    A --> D[코드3: GHI0-1234]
    
    B --> E[유저 A 사용]
    C --> F[유저 B 사용]
    D --> G[유저 C 사용]
    
    style B fill:#c8e6c9
    style C fill:#c8e6c9
    style D fill:#c8e6c9
```

**특징:**
- 설정한 수량만큼 고유한 코드가 생성됩니다.
- **선착순 사용:** 전체 발급된 쿠폰 중 사용하지 않은 코드를 가진 사람이 사용합니다.
- 유저별 제한 없음 (다른 코드를 가지고 있다면 여러 번 사용 가능)

**지원하는 코드 패턴:**

| 패턴 이름 | 설명 | 예시 |
|:---:|---|---|
| **8자리 (기본)** | 영문 대소문자+숫자 8자리 | `aB3dE9fG` |
| **16자리** | 영문 대소문자+숫자 16자리 | `aB3dE9fG1x2y3z4K` |
| **16자리 (하이픈)** | 4-4-4-4 형식 (가독성 좋음) | `ABCD-1234-EFGH-5678` |

**예시:** 사전 예약 보상, VIP 전용 쿠폰, 카드 패키지 동봉 쿠폰

### SPECIAL (키워드 쿠폰)

특정 **단어(키워드)**를 코드로 지정하여 사용합니다. 하나의 코드를 여러 유저가 공유합니다.

```mermaid
flowchart LR
    A[코드: XMAS2025] --> B[유저 A]
    A --> C[유저 B]
    A --> D[유저 C]
    
    style A fill:#fff9c4
```

**특징:**
- 관리자가 코드를 직접 지정합니다 (예: `WELCOME`, `SORRY`).
- **사용 제한:** 전체 사용 횟수(선착순 N명) 및 유저/캐릭터당 사용 횟수를 제한할 수 있습니다.

**코드 규칙:**
- **사용 가능 문자:** 영문 대문자(`A-Z`), 숫자(`0-9`)
- **길이:** 최소 4자리 이상
- **불가:** 공백, 특수문자, 한글 사용 불가

**예시:** 점검 보상, 기념일 이벤트, 인플루언서 배포용 코드

---

## 4. 쿠폰 발행 플로우

```mermaid
flowchart TD
    subgraph 관리자["👨‍💼 관리자 (Gatrix)"]
        A[쿠폰 정의 생성] --> B{유형 선택}
        B -->|SPECIAL| C[키워드 코드 1개 설정]
        B -->|NORMAL| D[난수 코드 N개 자동 생성]
    end
    
    subgraph 배포["📤 코드 배포"]
        C --> E[SNS/커뮤니티 공개]
        D --> F[이메일/DM 개별 발송]
    end
    
    subgraph 사용자["🎮 유저"]
        E --> G[코드 입력]
        F --> G
        G --> H[보상 수령]
    end
    
    style A fill:#e3f2fd
    style H fill:#c8e6c9
```

---

## 5. 보상 설정

쿠폰 사용 시 지급될 보상을 설정합니다.

### 보상 템플릿 사용

미리 정의된 보상 템플릿을 선택하여 간편하게 설정할 수 있습니다.

### 직접 설정

보상 목록에서 **[아이템 추가]** 버튼을 클릭하여 보상을 구성합니다. JSON을 직접 작성할 필요 없이 UI에서 간편하게 설정할 수 있습니다.

| 항목 | 설명 |
|------|------|
| **아이템 ID** | 지급할 아이템의 식별자 (예: `gold`, `diamond`) |
| **수량** | 지급할 아이템의 개수 |
| **속성** | (선택) 아이템의 추가 속성 |

필요한 만큼 아이템을 추가하여 패키지 형태의 보상도 만들 수 있습니다.

---

## 6. 운영 시나리오

### 시나리오: 사전 예약 쿠폰 발급

```mermaid
flowchart LR
    A[사전 예약 명단<br/>10,000명] --> B[NORMAL 쿠폰 생성<br/>10,000개]
    B --> C[코드 다운로드<br/>CSV 파일]
    C --> D[이메일 발송<br/>개별 코드 전달]
    
    style B fill:#e3f2fd
    style D fill:#c8e6c9
```

1. **[쿠폰 생성]** 클릭
2. 유형: **NORMAL** 선택 (개별 코드 필요)
3. 발행 수량: **10,000**
4. 보상 설정
5. **[저장]** → 10,000개의 고유 코드 자동 생성
6. **[코드 다운로드]** → CSV 파일로 내보내기
7. 사전 예약 명단과 매칭하여 이메일 발송

### 시나리오: 미디어/인플루언서 공용 코드 (SPECIAL)

```mermaid
flowchart LR
    A[프로모션 기획] --> B[SPECIAL 쿠폰 생성<br/>코드: YOUTUBE2024]
    B --> C[사용 제한: 10,000회]
    C --> D[유튜버에게 코드 전달]
    D --> E[영상으로 공개]
    
    style B fill:#e3f2fd
    style E fill:#c8e6c9
```

1. **[쿠폰 생성]** 클릭
2. 유형: **SPECIAL** 선택 (키워드 사용)
3. 코드: `YOUTUBE2024` (직접 입력)
4. 발행 수량(Max Uses): **10,000** (선착순 1만 명)
5. 유저별 사용 횟수: **1** (계정당 1회)
6. **[저장]**

---

## 7. 쿠폰 관리 체크리스트

### 쿠폰 생성 전 체크리스트

- [ ] 쿠폰 이름이 명확하게 구분되는가? (예: "설날2024_사전예약")
- [ ] 보상 아이템이 올바르게 설정되었는가?
- [ ] 유효 기간이 적절하게 설정되었는가?
- [ ] 플랫폼/채널 제한이 필요한가?
- [ ] 유저별 사용 횟수 제한이 설정되었는가?

### 쿠폰 발급 후 체크리스트

- [ ] 테스트 계정으로 쿠폰 사용 테스트 완료
- [ ] 보상이 정상적으로 지급되는지 확인
- [ ] 중복 사용 차단이 정상 동작하는지 확인
- [ ] 만료된 쿠폰 사용 시 적절한 에러 메시지 표시

---

## 8. 자주 묻는 질문 (FAQ)

**Q: 쿠폰 코드를 직접 지정할 수 있나요?**

A: **SPECIAL** 쿠폰의 경우 코드를 직접 지정할 수 있습니다(예: `HAPPYNEWYEAR`). **NORMAL** 쿠폰은 패턴(예: 영문+숫자 8자리)에 따라 자동으로 생성됩니다.

---

**Q: 발급된 쿠폰 코드를 확인하려면?**

A: 쿠폰 목록에서 해당 쿠폰의 **[발행된 코드 수]**를 클릭하면 발급된 코드 목록을 확인할 수 있습니다. CSV로 다운로드도 가능합니다.

---

**Q: 쿠폰 사용 내역을 추적할 수 있나요?**

A: 네, 감사 로그(Audit Log)에서 쿠폰 사용 내역을 확인할 수 있습니다. 또한 쿠폰별 사용률도 목록에서 바로 확인 가능합니다.

---

**Q: 이미 발급된 쿠폰을 비활성화하면?**

A: 쿠폰을 비활성화하면 더 이상 새로운 사용이 불가능합니다. 이미 사용된 보상은 회수되지 않습니다.

---

**이전 장:** [← 제 9장: 인게임 팝업 관리](08-popup-notices.md)  
**다음 장:** [제 11장: 설문조사 관리 →](10-surveys.md)
