# ============================================
# Local Development Environment Configuration
# ============================================
# Use this file when running services locally with `yarn dev`
# while infrastructure runs in Docker via docker-compose-infra.yml
#
# Usage:
#   1. Start infrastructure: docker compose -f docker-compose-infra.yml up -d
#   2. Copy this file to .env.local in workspace root
#   3. Run services: yarn workspace @gatrix/backend dev

# ============================================
# Database Configuration (Local Access)
# ============================================
# Using host-mapped ports for local access
DB_HOST=localhost
DB_PORT=43306
DB_NAME=gatrix
DB_USER=gatrix_user
DB_PASSWORD=gatrix_password
DB_ROOT_PASSWORD=gatrix_rootpassword

# ============================================
# Redis Configuration (Local Access)
# ============================================
REDIS_HOST=localhost
REDIS_PORT=46379
REDIS_PASSWORD=

# ============================================
# etcd Configuration (Local Access)
# ============================================
ETCD_HOSTS=http://localhost:42379
SERVICE_DISCOVERY_MODE=etcd
SERVICE_DISCOVERY_HEARTBEAT_TTL=30
SERVICE_DISCOVERY_INACTIVE_KEEP_TTL=60
SERVICE_DISCOVERY_TERMINATED_MARKER_TTL=300

# ============================================
# ClickHouse Configuration (Local Access)
# ============================================
CLICKHOUSE_HOST=localhost
CLICKHOUSE_PORT=48123
CLICKHOUSE_DATABASE=event_lens
CLICKHOUSE_USERNAME=default
CLICKHOUSE_PASSWORD=

# ============================================
# Loki Configuration (Local Access)
# ============================================
GATRIX_LOKI_ENABLED=true
GATRIX_LOKI_URL=http://localhost:43100/loki/api/v1/push

# ============================================
# Service Ports (Local - same as Docker)
# ============================================
PORT=45000
BACKEND_PORT=45000
CHAT_PORT=45100
EDGE_PORT=3400
EVENT_LENS_PORT=45200
FRONTEND_PORT=43000

# ============================================
# JWT Configuration
# ============================================
JWT_SECRET=dev-jwt-secret
JWT_REFRESH_SECRET=dev-refresh-secret
JWT_EXPIRES_IN=7d
SESSION_SECRET=dev-session-secret

# ============================================
# Environment
# ============================================
NODE_ENV=development
RUNNING_IN_DOCKER=false
LOG_FORMAT=json
LOG_LEVEL=debug
MONITORING_ENABLED=true

# ============================================
# Admin Configuration
# ============================================
ADMIN_EMAIL=admin@gatrix.com
ADMIN_PASSWORD=admin123
ADMIN_NAME=Administrator

# ============================================
# CORS Configuration
# ============================================
CORS_ORIGIN=*

# ============================================
# Chat Server Configuration
# ============================================
CHAT_SERVER_URL=http://localhost:45100
CHAT_SERVER_API_TOKEN=gatrix-api-d58e8c748ac604b8020526904558251a0604000f8a5898a1b5e28b99aee9ed79
BACKEND_SERVICE_TOKEN=gatrix-backend-service-token-default-key-change-in-production
CHAT_DB_NAME=gatrix_chat

# ============================================
# Edge Server Configuration
# ============================================
GATRIX_URL=http://localhost:45000
GATRIX_ENVIRONMENT=development
API_TOKEN=gatrix-unsecured-server-api-token
EDGE_BYPASS_TOKEN=gatrix-edge-internal-bypass-token
EDGE_APPLICATION_NAME=edge-server
EDGE_ENVIRONMENTS=*
EDGE_CACHE_SYNC_METHOD=event
EDGE_CACHE_REDIS_HOST=localhost
EDGE_CACHE_REDIS_PORT=46379
EDGE_FORCE_HTTPS=false

# ============================================
# OAuth Configuration (Optional)
# ============================================
GITHUB_CLIENT_ID=Ov23liINHymsWsuhfbW4
GITHUB_CLIENT_SECRET=81c9780248941071a4642033b1ae174bd5a14982

# ============================================
# Frontend Configuration
# ============================================
VITE_API_URL=/api/v1
VITE_APP_NAME=Gatrix
VITE_DEFAULT_LANGUAGE=ko
VITE_GRAFANA_URL=http://localhost:44000
VITE_EDGE_URL=http://localhost:3400

# ============================================
# Logging
# ============================================
LOG_SERVICE_NAME=gatrix-backend
DISABLE_X_POWERED_BY=true
DEFAULT_LANGUAGE=ko
