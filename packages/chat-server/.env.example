# Server Configuration
NODE_ENV=development
PORT=3001
HOST=localhost

# Database Configuration
DB_HOST=localhost
DB_PORT=3306
DB_NAME=gatrix_chat
DB_USER=root
DB_PASSWORD=password

# Redis Configuration (supports cluster mode for scaling)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=1

# Redis Cluster (for 100k+ users)
REDIS_CLUSTER_ENABLED=false
REDIS_CLUSTER_NODES=localhost:7000,localhost:7001,localhost:7002

# JWT Configuration (must match backend JWT_SECRET)
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=24h

# File Upload Configuration
UPLOAD_MAX_SIZE=10485760
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/gif,image/webp,video/mp4,video/webm,audio/mp3,audio/wav,application/pdf,text/plain
UPLOAD_PATH=./uploads

# Gatrix Main Server Configuration
GATRIX_API_URL=http://localhost:3000
GATRIX_API_SECRET=shared-secret-between-servers
GATRIX_CONNECTION_TIMEOUT=30000

# CORS Configuration
CORS_ORIGIN=http://localhost:5173,http://localhost:3000

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# WebSocket Configuration (optimized for high concurrency)
WS_PING_TIMEOUT=60000
WS_PING_INTERVAL=25000
WS_MAX_HTTP_BUFFER_SIZE=1048576
WS_UPGRADE_TIMEOUT=10000
WS_MAX_CONNECTIONS=10000
WS_COMPRESSION=true

# Clustering Configuration (for horizontal scaling)
CLUSTER_ENABLED=true
CLUSTER_WORKERS=0
STICKY_SESSION=true

# Message Broadcasting Optimization
BROADCAST_BATCH_SIZE=1000
BROADCAST_BATCH_DELAY=10
USE_MESSAGE_PACK=true
BROADCAST_COMPRESSION=true
CHANNEL_SHARDING=true
MAX_CHANNELS_PER_SHARD=1000

# Performance Monitoring
MONITORING_ENABLED=true
METRICS_PORT=9090
HEALTH_CHECK_PATH=/health
READINESS_CHECK_PATH=/ready

# Memory Management
MAX_MEMORY_USAGE=1073741824
GC_INTERVAL=300000
CONNECTION_CLEANUP_INTERVAL=60000

# Logging
LOG_LEVEL=info
LOG_FILE=./logs/chat-server.log
DB_DEBUG=false

# Health Check
HEALTH_CHECK_INTERVAL=30000
