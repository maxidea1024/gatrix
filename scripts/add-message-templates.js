const mysql = require('mysql2/promise');
require('dotenv').config();

// ë©”ì‹œì§€ í…œí”Œë¦¿ íƒ€ì…ë“¤
const MESSAGE_TYPES = [
  'maintenance',
  'event',
  'announcement',
  'notification',
  'warning',
  'emergency',
  'update',
  'promotion'
];

// ì˜¨ë¼ì¸ ê²Œì„ ê´€ë ¨ ë©”ì‹œì§€ í…œí”Œë¦¿ë“¤
const GAME_TEMPLATES = {
  maintenance: [
    {
      name: "ì •ê¸° ì ê²€ ì•ˆë‚´",
      content: "ì•ˆë…•í•˜ì„¸ìš”. ë” ë‚˜ì€ ì„œë¹„ìŠ¤ ì œê³µì„ ìœ„í•´ ì •ê¸° ì ê²€ì„ ì‹¤ì‹œí•©ë‹ˆë‹¤. ì ê²€ ì‹œê°„: {{startTime}} ~ {{endTime}}"
    },
    {
      name: "ê¸´ê¸‰ ì ê²€ ê³µì§€",
      content: "ê¸´ê¸‰ ì ê²€ìœ¼ë¡œ ì¸í•´ ì¼ì‹œì ìœ¼ë¡œ ì„œë¹„ìŠ¤ê°€ ì¤‘ë‹¨ë©ë‹ˆë‹¤. ë¹ ë¥¸ ì‹œì¼ ë‚´ì— ì •ìƒí™”í•˜ê² ìŠµë‹ˆë‹¤."
    },
    {
      name: "ì„œë²„ ì—…ë°ì´íŠ¸ ì ê²€",
      content: "ì„œë²„ ì•ˆì •ì„± í–¥ìƒì„ ìœ„í•œ ì—…ë°ì´íŠ¸ ì ê²€ì„ ì§„í–‰í•©ë‹ˆë‹¤. ì´ìš©ì— ë¶ˆí¸ì„ ë“œë ¤ ì£„ì†¡í•©ë‹ˆë‹¤."
    },
    {
      name: "ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™” ì ê²€",
      content: "ê²Œì„ ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•œ ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™” ì‘ì—…ì„ ì§„í–‰í•©ë‹ˆë‹¤."
    },
    {
      name: "ë³´ì•ˆ íŒ¨ì¹˜ ì ìš© ì ê²€",
      content: "ë³´ì•ˆ ê°•í™”ë¥¼ ìœ„í•œ íŒ¨ì¹˜ ì ìš©ìœ¼ë¡œ ì¸í•´ ì„œë¹„ìŠ¤ê°€ ì¼ì‹œ ì¤‘ë‹¨ë©ë‹ˆë‹¤."
    }
  ],
  event: [
    {
      name: "ì‹ ê·œ ì´ë²¤íŠ¸ ì‹œì‘",
      content: "ğŸ‰ ìƒˆë¡œìš´ ì´ë²¤íŠ¸ê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤! íŠ¹ë³„í•œ ë³´ìƒì„ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”!"
    },
    {
      name: "ë”ë¸” ê²½í—˜ì¹˜ ì´ë²¤íŠ¸",
      content: "âš¡ ë”ë¸” ê²½í—˜ì¹˜ ì´ë²¤íŠ¸ ì§„í–‰ ì¤‘! ì´ ê¸°íšŒë¥¼ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”!"
    },
    {
      name: "ë ˆì–´ ì•„ì´í…œ ë“œë¡­ ì´ë²¤íŠ¸",
      content: "ğŸ’ ë ˆì–´ ì•„ì´í…œ ë“œë¡­ë¥ ì´ 2ë°° ì¦ê°€í–ˆìŠµë‹ˆë‹¤! ì§€ê¸ˆ ë°”ë¡œ ì‚¬ëƒ¥ì„ ì‹œì‘í•˜ì„¸ìš”!"
    },
    {
      name: "ê¸¸ë“œ ëŒ€ì „ ì´ë²¤íŠ¸",
      content: "âš”ï¸ ê¸¸ë“œ ëŒ€ì „ì´ ì‹œì‘ë©ë‹ˆë‹¤! ìµœê°• ê¸¸ë“œë¥¼ ê°€ë ¤ë³´ì„¸ìš”!"
    },
    {
      name: "ì‹œì¦Œ ì´ë²¤íŠ¸ ì¢…ë£Œ ì•ˆë‚´",
      content: "ğŸ‚ ê°€ì„ ì‹œì¦Œ ì´ë²¤íŠ¸ê°€ ê³§ ì¢…ë£Œë©ë‹ˆë‹¤. ë§ˆì§€ë§‰ ê¸°íšŒë¥¼ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”!"
    }
  ],
  announcement: [
    {
      name: "ì‹ ê·œ ì½˜í…ì¸  ì—…ë°ì´íŠ¸",
      content: "ğŸ†• ìƒˆë¡œìš´ ë˜ì „ê³¼ ë³´ìŠ¤ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤! ë„ì „í•´ë³´ì„¸ìš”!"
    },
    {
      name: "ë°¸ëŸ°ìŠ¤ íŒ¨ì¹˜ ì•ˆë‚´",
      content: "âš–ï¸ ê²Œì„ ë°¸ëŸ°ìŠ¤ ì¡°ì •ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤. íŒ¨ì¹˜ ë…¸íŠ¸ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”."
    },
    {
      name: "ì‹ ê·œ ìºë¦­í„° ì¶œì‹œ",
      content: "ğŸ‘¤ ìƒˆë¡œìš´ ìºë¦­í„° í´ë˜ìŠ¤ê°€ ì¶œì‹œë˜ì—ˆìŠµë‹ˆë‹¤! ì§€ê¸ˆ ë°”ë¡œ ì²´í—˜í•´ë³´ì„¸ìš”!"
    },
    {
      name: "UI ê°œì„  ì—…ë°ì´íŠ¸",
      content: "ğŸ¨ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ê°€ ë”ìš± í¸ë¦¬í•˜ê²Œ ê°œì„ ë˜ì—ˆìŠµë‹ˆë‹¤."
    },
    {
      name: "ì»¤ë®¤ë‹ˆí‹° ê¸°ëŠ¥ ì¶”ê°€",
      content: "ğŸ’¬ ìƒˆë¡œìš´ ì»¤ë®¤ë‹ˆí‹° ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ë¥¸ í”Œë ˆì´ì–´ë“¤ê³¼ ì†Œí†µí•´ë³´ì„¸ìš”!"
    }
  ],
  notification: [
    {
      name: "ì¹œêµ¬ ì ‘ì† ì•Œë¦¼",
      content: "ğŸ‘‹ {{friendName}}ë‹˜ì´ ì ‘ì†í•˜ì…¨ìŠµë‹ˆë‹¤!"
    },
    {
      name: "ê¸¸ë“œ ì´ˆëŒ€ ì•Œë¦¼",
      content: "ğŸ° {{guildName}} ê¸¸ë“œì—ì„œ ì´ˆëŒ€ì¥ì„ ë³´ëƒˆìŠµë‹ˆë‹¤."
    },
    {
      name: "ë ˆë²¨ì—… ì¶•í•˜",
      content: "ğŸŠ ì¶•í•˜í•©ë‹ˆë‹¤! ë ˆë²¨ {{level}}ì— ë„ë‹¬í•˜ì…¨ìŠµë‹ˆë‹¤!"
    },
    {
      name: "í€˜ìŠ¤íŠ¸ ì™„ë£Œ ì•Œë¦¼",
      content: "âœ… í€˜ìŠ¤íŠ¸ '{{questName}}'ì„ ì™„ë£Œí•˜ì…¨ìŠµë‹ˆë‹¤!"
    },
    {
      name: "ì•„ì´í…œ íšë“ ì•Œë¦¼",
      content: "ğŸ’° {{itemName}}ì„(ë¥¼) íšë“í•˜ì…¨ìŠµë‹ˆë‹¤!"
    }
  ],
  warning: [
    {
      name: "ê³„ì • ë³´ì•ˆ ê²½ê³ ",
      content: "âš ï¸ ë¹„ì •ìƒì ì¸ ì ‘ì†ì´ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤. ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³€ê²½í•´ì£¼ì„¸ìš”."
    },
    {
      name: "ë¶€ì • í–‰ìœ„ ê²½ê³ ",
      content: "ğŸš« ë¶€ì • í–‰ìœ„ê°€ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤. ê³„ì • ì œì¬ ì¡°ì¹˜ê°€ ì·¨í•´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
    },
    {
      name: "ì—°ê²° ë¶ˆì•ˆì • ê²½ê³ ",
      content: "ğŸ“¶ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì´ ë¶ˆì•ˆì •í•©ë‹ˆë‹¤. ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”."
    },
    {
      name: "ê³¼ë„í•œ ì ‘ì† ì‹œë„ ê²½ê³ ",
      content: "ğŸ”’ ê³¼ë„í•œ ë¡œê·¸ì¸ ì‹œë„ë¡œ ì¸í•´ ê³„ì •ì´ ì¼ì‹œ ì ê¸ˆë˜ì—ˆìŠµë‹ˆë‹¤."
    },
    {
      name: "ê³„ì • ë§Œë£Œ ê²½ê³ ",
      content: "â° ê³„ì • ìœ íš¨ê¸°ê°„ì´ {{days}}ì¼ ë‚¨ì•˜ìŠµë‹ˆë‹¤. ê°±ì‹ í•´ì£¼ì„¸ìš”."
    }
  ],
  emergency: [
    {
      name: "ì„œë²„ ì¥ì•  ê¸´ê¸‰ ê³µì§€",
      content: "ğŸš¨ ì„œë²„ ì¥ì• ë¡œ ì¸í•´ ì„œë¹„ìŠ¤ê°€ ë¶ˆì•ˆì •í•©ë‹ˆë‹¤. ë³µêµ¬ ì‘ì—… ì¤‘ì…ë‹ˆë‹¤."
    },
    {
      name: "ë³´ì•ˆ ì¹¨í•´ ê¸´ê¸‰ ëŒ€ì‘",
      content: "ğŸ” ë³´ì•ˆ ì¹¨í•´ê°€ ê°ì§€ë˜ì–´ ê¸´ê¸‰ ë³´ì•ˆ ì¡°ì¹˜ë¥¼ ì‹œí–‰í•©ë‹ˆë‹¤."
    },
    {
      name: "ë°ì´í„° ì†ì‹¤ ë°©ì§€ ì¡°ì¹˜",
      content: "ğŸ’¾ ë°ì´í„° ë³´í˜¸ë¥¼ ìœ„í•´ ê¸´ê¸‰ ë°±ì—… ì‘ì—…ì„ ì§„í–‰í•©ë‹ˆë‹¤."
    },
    {
      name: "DDoS ê³µê²© ëŒ€ì‘",
      content: "ğŸ›¡ï¸ DDoS ê³µê²©ìœ¼ë¡œ ì¸í•œ ì„œë¹„ìŠ¤ ì§€ì—°ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
    },
    {
      name: "ê²°ì œ ì‹œìŠ¤í…œ ì¥ì• ",
      content: "ğŸ’³ ê²°ì œ ì‹œìŠ¤í…œ ì¥ì• ë¡œ ì¸í•´ ì¼ì‹œì ìœ¼ë¡œ ê²°ì œê°€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤."
    }
  ],
  update: [
    {
      name: "í´ë¼ì´ì–¸íŠ¸ ì—…ë°ì´íŠ¸ í•„ìˆ˜",
      content: "ğŸ“± ìƒˆë¡œìš´ ë²„ì „ì´ ì¶œì‹œë˜ì—ˆìŠµë‹ˆë‹¤. ì—…ë°ì´íŠ¸ í›„ ì´ìš©í•´ì£¼ì„¸ìš”."
    },
    {
      name: "ê²Œì„ ì—”ì§„ ì—…ê·¸ë ˆì´ë“œ",
      content: "ğŸ”§ ê²Œì„ ì—”ì§„ì´ ì—…ê·¸ë ˆì´ë“œë˜ì–´ ë”ìš± ë¶€ë“œëŸ¬ìš´ ê²Œì„í”Œë ˆì´ë¥¼ ì œê³µí•©ë‹ˆë‹¤."
    },
    {
      name: "ê·¸ë˜í”½ ê°œì„  ì—…ë°ì´íŠ¸",
      content: "ğŸ® ê·¸ë˜í”½ í’ˆì§ˆì´ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤. ë”ìš± ìƒìƒí•œ ê²Œì„ì„ ì¦ê²¨ë³´ì„¸ìš”!"
    },
    {
      name: "ë²„ê·¸ ìˆ˜ì • ì—…ë°ì´íŠ¸",
      content: "ğŸ› ì—¬ëŸ¬ ë²„ê·¸ê°€ ìˆ˜ì •ë˜ì–´ ê²Œì„ì´ ë”ìš± ì•ˆì •ì ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤."
    },
    {
      name: "ì„±ëŠ¥ ìµœì í™” ì—…ë°ì´íŠ¸",
      content: "âš¡ ê²Œì„ ì„±ëŠ¥ì´ ìµœì í™”ë˜ì–´ ë”ìš± ë¹ ë¥´ê³  ì¾Œì í•œ í”Œë ˆì´ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤."
    }
  ],
  promotion: [
    {
      name: "ì‹ ê·œ ìœ ì € í˜œíƒ",
      content: "ğŸ ì‹ ê·œ ê°€ì… ì¶•í•˜! íŠ¹ë³„ ì•„ì´í…œì„ ë°›ì•„ê°€ì„¸ìš”!"
    },
    {
      name: "VIP ë©¤ë²„ì‹­ í˜œíƒ",
      content: "ğŸ‘‘ VIP ë©¤ë²„ì‹­ ê°€ì… ì‹œ ë…ì  í˜œíƒì„ ëˆ„ë¦¬ì„¸ìš”!"
    },
    {
      name: "í• ì¸ ì´ë²¤íŠ¸ ì§„í–‰",
      content: "ğŸ’¸ ëª¨ë“  ì•„ì´í…œ 50% í• ì¸! ì§€ê¸ˆì´ ê¸°íšŒì…ë‹ˆë‹¤!"
    },
    {
      name: "í”„ë¦¬ë¯¸ì—„ íŒ¨ìŠ¤ ì¶œì‹œ",
      content: "ğŸ« í”„ë¦¬ë¯¸ì—„ íŒ¨ìŠ¤ë¡œ ë” ë§ì€ ë³´ìƒì„ íšë“í•˜ì„¸ìš”!"
    },
    {
      name: "ì¹œêµ¬ ì¶”ì²œ ì´ë²¤íŠ¸",
      content: "ğŸ‘¥ ì¹œêµ¬ë¥¼ ì¶”ì²œí•˜ê³  íŠ¹ë³„ ë³´ìƒì„ ë°›ì•„ë³´ì„¸ìš”!"
    }
  ]
};

// ì¶”ê°€ ìƒì„¸ í…œí”Œë¦¿ë“¤
const DETAILED_TEMPLATES = {
  maintenance: [
    "ì„œë²„ í•˜ë“œì›¨ì–´ êµì²´ ì‘ì—…", "ë„¤íŠ¸ì›Œí¬ ì¸í”„ë¼ ì—…ê·¸ë ˆì´ë“œ", "ë°ì´í„°ì„¼í„° ì´ì „ ì‘ì—…",
    "ë°±ì—… ì‹œìŠ¤í…œ ì ê²€", "ë¡œë“œë°¸ëŸ°ì„œ ì„¤ì • ë³€ê²½", "CDN ìµœì í™” ì‘ì—…",
    "SSL ì¸ì¦ì„œ ê°±ì‹ ", "ë°©í™”ë²½ ê·œì¹™ ì—…ë°ì´íŠ¸", "ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ ì ê²€",
    "ë¡œê·¸ ì‹œìŠ¤í…œ ì •ë¦¬", "ìºì‹œ ì„œë²„ ìµœì í™”", "API ì„œë²„ ì—…ë°ì´íŠ¸"
  ],
  event: [
    "í¬ë¦¬ìŠ¤ë§ˆìŠ¤ íŠ¹ë³„ ì´ë²¤íŠ¸", "ì‹ ë…„ ë§ì´ ì´ë²¤íŠ¸", "ë°œë Œíƒ€ì¸ë°ì´ ì´ë²¤íŠ¸",
    "í™”ì´íŠ¸ë°ì´ ì´ë²¤íŠ¸", "ì–´ë¦°ì´ë‚  ì´ë²¤íŠ¸", "ì–´ë²„ì´ë‚  ê°ì‚¬ ì´ë²¤íŠ¸",
    "ì—¬ë¦„ íœ´ê°€ì²  ì´ë²¤íŠ¸", "ì¶”ì„ ì—°íœ´ ì´ë²¤íŠ¸", "í• ë¡œìœˆ íŠ¹ë³„ ì´ë²¤íŠ¸",
    "ë¸”ë™í”„ë¼ì´ë°ì´ ì„¸ì¼", "ì‚¬ì´ë²„ë¨¼ë°ì´ í• ì¸", "ì—°ë§ ê°ì‚¬ ì´ë²¤íŠ¸"
  ],
  announcement: [
    "ì‹ ê·œ ë˜ì „ ì˜¤í”ˆ", "PvP ì‹œìŠ¤í…œ ê°œí¸", "ê¸¸ë“œ ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸",
    "í« ì‹œìŠ¤í…œ ì¶”ê°€", "íƒˆê²ƒ ì‹œìŠ¤í…œ ë„ì…", "í•˜ìš°ì§• ì‹œìŠ¤í…œ ì˜¤í”ˆ",
    "í¬ë˜í”„íŒ… ì‹œìŠ¤í…œ ê°œì„ ", "ê²½ë§¤ì¥ ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸", "ì¹œêµ¬ ì‹œìŠ¤í…œ í™•ì¥",
    "ì±„íŒ… ì‹œìŠ¤í…œ ê°œì„ ", "ì¸ë²¤í† ë¦¬ í™•ì¥", "ìŠ¤í‚¬ íŠ¸ë¦¬ ê°œí¸"
  ],
  notification: [
    "ì¼ì¼ í€˜ìŠ¤íŠ¸ ì™„ë£Œ", "ì£¼ê°„ í€˜ìŠ¤íŠ¸ ì™„ë£Œ", "ì›”ê°„ ë¯¸ì…˜ ë‹¬ì„±",
    "ì—…ì  ë‹¬ì„± ì•Œë¦¼", "íƒ€ì´í‹€ íšë“", "ë­í‚¹ ìˆœìœ„ ë³€ë™",
    "ê¸¸ë“œ ë ˆë²¨ì—…", "ê¸¸ë“œ ë©¤ë²„ ê°€ì…", "ê¸¸ë“œ ì´ë²¤íŠ¸ ì‹œì‘",
    "ì¹œêµ¬ ìƒì¼ ì•Œë¦¼", "ì ‘ì† ë³´ìƒ ìˆ˜ë ¹", "ì¶œì„ ì²´í¬ ì™„ë£Œ"
  ],
  warning: [
    "ê³„ì • í•´í‚¹ ì‹œë„ ê°ì§€", "ë¹„ì •ìƒì ì¸ ê²Œì„ í”Œë ˆì´ íŒ¨í„´", "ë§¤í¬ë¡œ ì‚¬ìš© ì˜ì‹¬",
    "RMT ê±°ë˜ ì˜ì‹¬", "ìš•ì„¤ ë° ë¹„ë°© ê²½ê³ ", "ìŠ¤íŒ¸ ë©”ì‹œì§€ ë°œì†¡ ê²½ê³ ",
    "ê³„ì • ê³µìœ  ì˜ì‹¬", "IP ë³€ê²½ ê°ì§€", "ë‹¤ì¤‘ ê³„ì • ì˜ì‹¬",
    "ê²Œì„ ë‚´ ì‚¬ê¸° ì‹ ê³ ", "ë¶€ì ì ˆí•œ ë‹‰ë„¤ì„ ì‚¬ìš©", "ì»¤ë®¤ë‹ˆí‹° ê°€ì´ë“œë¼ì¸ ìœ„ë°˜"
  ],
  emergency: [
    "í•´í‚¹ ê³µê²© íƒì§€", "ì„œë²„ ê³¼ë¶€í•˜ ìƒí™©", "ë°ì´í„°ë² ì´ìŠ¤ ì˜¤ë¥˜",
    "ê²°ì œ ì‹œìŠ¤í…œ ì˜¤ë¥˜", "ë¡œê·¸ì¸ ì„œë²„ ì¥ì• ", "ê²Œì„ ì„œë²„ í¬ë˜ì‹œ",
    "ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì¥ì• ", "ë³´ì•ˆ ì·¨ì•½ì  ë°œê²¬", "ê°œì¸ì •ë³´ ìœ ì¶œ ì˜ì‹¬",
    "ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ ë¶€ì¡±", "ë°±ì—… ì‹œìŠ¤í…œ ì‹¤íŒ¨", "ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ ì•ŒëŒ"
  ],
  update: [
    "ëª¨ë°”ì¼ ì•± ì—…ë°ì´íŠ¸", "ì›¹ í´ë¼ì´ì–¸íŠ¸ ì—…ë°ì´íŠ¸", "ê²Œì„ ëŸ°ì²˜ ì—…ë°ì´íŠ¸",
    "ê·¸ë˜í”½ ë“œë¼ì´ë²„ í˜¸í™˜ì„±", "ìš´ì˜ì²´ì œ í˜¸í™˜ì„± ê°œì„ ", "ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìµœì í™”",
    "ë°°í„°ë¦¬ ì†Œëª¨ëŸ‰ ê°œì„ ", "ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì•ˆì •ì„±", "í„°ì¹˜ ì¸í„°í˜ì´ìŠ¤ ê°œì„ ",
    "í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì¶”ê°€", "ë§ˆìš°ìŠ¤ ê°ë„ ì„¤ì •", "í™”ë©´ í•´ìƒë„ ì§€ì›"
  ],
  promotion: [
    "ì²« êµ¬ë§¤ 50% í• ì¸", "ì£¼ë§ íŠ¹ê°€ ì´ë²¤íŠ¸", "ì›”ë§ ì •ì‚° ì„¸ì¼",
    "ì‹ ê·œ ì•„ì´í…œ ì¶œì‹œ ê¸°ë…", "ì—…ë°ì´íŠ¸ ê¸°ë… í• ì¸", "ì„œë²„ ì˜¤í”ˆ ê¸°ë…",
    "í”Œë ˆì´ì–´ ìˆ˜ ëŒíŒŒ ê¸°ë…", "ë¦¬ë·° ì´ë²¤íŠ¸ ì°¸ì—¬", "SNS ê³µìœ  ì´ë²¤íŠ¸",
    "ìŠ¤íŠ¸ë¦¬ë° ì‹œì²­ ì´ë²¤íŠ¸", "ì»¤ë®¤ë‹ˆí‹° ì°¸ì—¬ ë³´ìƒ", "ë² íƒ€ í…ŒìŠ¤í„° ê°ì‚¬"
  ]
};

// ì¶”ê°€ í…œí”Œë¦¿ ìƒì„± í•¨ìˆ˜
function generateAdditionalTemplates() {
  const templates = [];
  let counter = 1;

  // ê¸°ë³¸ í…œí”Œë¦¿ë“¤ ì¶”ê°€
  Object.keys(GAME_TEMPLATES).forEach(type => {
    const baseTemplates = GAME_TEMPLATES[type];

    baseTemplates.forEach(template => {
      templates.push({
        name: `${template.name}_${counter++}`,
        type: type,
        content: template.content
      });
    });
  });

  // ìƒì„¸ í…œí”Œë¦¿ë“¤ ì¶”ê°€
  Object.keys(DETAILED_TEMPLATES).forEach(type => {
    const detailTemplates = DETAILED_TEMPLATES[type];

    detailTemplates.forEach((templateName, index) => {
      templates.push({
        name: `${templateName}_${counter++}`,
        type: type,
        content: generateDetailedContent(templateName, type)
      });
    });
  });

  // ì¶”ê°€ ë³€í˜• í…œí”Œë¦¿ë“¤ ìƒì„± (1000ê°œê¹Œì§€ ì±„ìš°ê¸°)
  while (templates.length < 1000) {
    const randomType = MESSAGE_TYPES[Math.floor(Math.random() * MESSAGE_TYPES.length)];
    const randomNumber = Math.floor(Math.random() * 1000) + 1;

    templates.push({
      name: `ìë™ìƒì„±_${randomType}_í…œí”Œë¦¿_${randomNumber}_${counter++}`,
      type: randomType,
      content: generateRandomContent(randomType, randomNumber)
    });
  }

  return templates.slice(0, 1000); // ì •í™•íˆ 1000ê°œë§Œ ë°˜í™˜
}

function generateDetailedContent(templateName, type) {
  const contentTemplates = {
    maintenance: [
      `${templateName} ì‘ì—…ì„ ì§„í–‰í•©ë‹ˆë‹¤. ì˜ˆìƒ ì†Œìš” ì‹œê°„: {{duration}}ë¶„`,
      `${templateName}ìœ¼ë¡œ ì¸í•´ ì„œë¹„ìŠ¤ê°€ ì¼ì‹œ ì¤‘ë‹¨ë©ë‹ˆë‹¤. ì–‘í•´ ë¶€íƒë“œë¦½ë‹ˆë‹¤.`,
      `${templateName} ì™„ë£Œ í›„ ë”ìš± ì•ˆì •ì ì¸ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ê² ìŠµë‹ˆë‹¤.`,
      `${templateName} ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤. ì§„í–‰ ìƒí™©ì€ ê³µì§€ì‚¬í•­ì—ì„œ í™•ì¸í•˜ì„¸ìš”.`
    ],
    event: [
      `ğŸ‰ ${templateName}ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤! íŠ¹ë³„ ë³´ìƒì„ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”!`,
      `â­ ${templateName} ê¸°ê°„: {{startDate}} ~ {{endDate}}`,
      `ğŸ ${templateName} ì°¸ì—¬ ì‹œ ë…ì  ì•„ì´í…œì„ íšë“í•˜ì„¸ìš”!`,
      `ğŸ† ${templateName}ì—ì„œ ìµœê³  ìˆœìœ„ë¥¼ ë‹¬ì„±í•´ë³´ì„¸ìš”!`
    ],
    announcement: [
      `ğŸ“¢ ${templateName}ì— ëŒ€í•œ ì•ˆë‚´ì…ë‹ˆë‹¤.`,
      `ğŸ†• ${templateName}ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì„ í™•ì¸í•˜ì„¸ìš”.`,
      `âœ¨ ${templateName}ìœ¼ë¡œ ê²Œì„ì´ ë”ìš± ì¬ë¯¸ìˆì–´ì§‘ë‹ˆë‹¤!`,
      `ğŸ”§ ${templateName}ì„ í†µí•´ ì‚¬ìš©ì ê²½í—˜ì´ ê°œì„ ë©ë‹ˆë‹¤.`
    ],
    notification: [
      `âœ… ${templateName}ë˜ì—ˆìŠµë‹ˆë‹¤!`,
      `ğŸ”” ${templateName} ì•Œë¦¼: í™•ì¸í•´ì£¼ì„¸ìš”.`,
      `ğŸ“¬ ${templateName} ê´€ë ¨ ìƒˆë¡œìš´ ì†Œì‹ì´ ìˆìŠµë‹ˆë‹¤.`,
      `â° ${templateName} ì‹œê°„ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.`
    ],
    warning: [
      `âš ï¸ ${templateName}ì´ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤. ì£¼ì˜í•˜ì„¸ìš”.`,
      `ğŸš¨ ${templateName}ìœ¼ë¡œ ì¸í•œ ë³´ì•ˆ ê²½ê³ ì…ë‹ˆë‹¤.`,
      `â— ${templateName} ê´€ë ¨ ì¤‘ìš”í•œ ì•Œë¦¼ì…ë‹ˆë‹¤.`,
      `ğŸ”’ ${templateName}ìœ¼ë¡œ ì¸í•´ ê³„ì • ë³´ì•ˆ ì¡°ì¹˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.`
    ],
    emergency: [
      `ğŸš¨ ê¸´ê¸‰: ${templateName}ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.`,
      `âš¡ ${templateName}ìœ¼ë¡œ ì¸í•œ ê¸´ê¸‰ ìƒí™©ì…ë‹ˆë‹¤.`,
      `ğŸ”´ ${templateName} ëŒ€ì‘ ì¤‘ì…ë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.`,
      `ğŸ†˜ ${templateName} í•´ê²°ì„ ìœ„í•´ ìµœì„ ì„ ë‹¤í•˜ê³  ìˆìŠµë‹ˆë‹¤.`
    ],
    update: [
      `ğŸ“± ${templateName}ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.`,
      `ğŸ”„ ${templateName}ì„ ì ìš©í•´ì£¼ì„¸ìš”.`,
      `â¬†ï¸ ${templateName}ìœ¼ë¡œ ì„±ëŠ¥ì´ í–¥ìƒë©ë‹ˆë‹¤.`,
      `ğŸ› ï¸ ${templateName} í›„ ì¬ì‹œì‘ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`
    ],
    promotion: [
      `ğŸ’° ${templateName}! ì§€ê¸ˆ ë°”ë¡œ í™•ì¸í•˜ì„¸ìš”!`,
      `ğŸ¯ ${templateName} ê¸°íšŒë¥¼ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”!`,
      `ğŸ’ ${templateName}ìœ¼ë¡œ íŠ¹ë³„í•œ í˜œíƒì„ ë°›ìœ¼ì„¸ìš”!`,
      `ğŸŒŸ ${templateName} í•œì • ì‹œê°„ ë™ì•ˆë§Œ ì œê³µë©ë‹ˆë‹¤!`
    ]
  };

  const templates = contentTemplates[type] || contentTemplates.announcement;
  return templates[Math.floor(Math.random() * templates.length)];
}

function generateRandomContent(type, number) {
  const randomContents = {
    maintenance: [
      `ì‹œìŠ¤í…œ ì ê²€ ${number}ë²ˆì§¸ ì‘ì—…ì„ ì§„í–‰í•©ë‹ˆë‹¤.`,
      `ì„œë²„ ìµœì í™” ì‘ì—… #${number}ì„ ì‹¤ì‹œí•©ë‹ˆë‹¤.`,
      `ì •ê¸° ì ê²€ ${number}ì°¨ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤.`,
      `ë³´ì•ˆ ì—…ë°ì´íŠ¸ ${number}ë²ˆì„ ì ìš©í•©ë‹ˆë‹¤.`
    ],
    event: [
      `íŠ¹ë³„ ì´ë²¤íŠ¸ #${number}ì´ ì‹œì‘ë©ë‹ˆë‹¤!`,
      `ì‹œì¦Œ ${number} ì´ë²¤íŠ¸ì— ì°¸ì—¬í•˜ì„¸ìš”!`,
      `í•œì • ì´ë²¤íŠ¸ ${number}ë²ˆì§¸ ê¸°íšŒì…ë‹ˆë‹¤!`,
      `ì´ë²¤íŠ¸ ${number}: ë†“ì¹˜ë©´ í›„íšŒí•  ë³´ìƒ!`
    ],
    announcement: [
      `ê³µì§€ì‚¬í•­ ${number}: ì¤‘ìš”í•œ ì—…ë°ì´íŠ¸ì…ë‹ˆë‹¤.`,
      `ì•Œë¦¼ ${number}ë²ˆ: ìƒˆë¡œìš´ ì†Œì‹ì„ í™•ì¸í•˜ì„¸ìš”.`,
      `ì—…ë°ì´íŠ¸ ${number}: ê²Œì„ì´ ë”ìš± ì¬ë¯¸ìˆì–´ì§‘ë‹ˆë‹¤.`,
      `ì†Œì‹ ${number}: í”Œë ˆì´ì–´ ì—¬ëŸ¬ë¶„ê»˜ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.`
    ],
    notification: [
      `ì•Œë¦¼ ${number}: ìƒˆë¡œìš´ í™œë™ì´ ìˆìŠµë‹ˆë‹¤.`,
      `ë©”ì‹œì§€ ${number}: í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.`,
      `ì—…ë°ì´íŠ¸ ${number}: ìƒíƒœê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.`,
      `ì •ë³´ ${number}: ìƒˆë¡œìš´ ì •ë³´ê°€ ë„ì°©í–ˆìŠµë‹ˆë‹¤.`
    ],
    warning: [
      `ê²½ê³  ${number}: ì£¼ì˜ê°€ í•„ìš”í•œ ìƒí™©ì…ë‹ˆë‹¤.`,
      `ì£¼ì˜ ${number}: ë³´ì•ˆ ê´€ë ¨ ì•Œë¦¼ì…ë‹ˆë‹¤.`,
      `ìœ„í—˜ ${number}: ì¦‰ì‹œ í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.`,
      `ê²½ê³  ë©”ì‹œì§€ ${number}: ì¤‘ìš”í•œ ë³´ì•ˆ ì•Œë¦¼ì…ë‹ˆë‹¤.`
    ],
    emergency: [
      `ê¸´ê¸‰ ${number}: ì¦‰ì‹œ ëŒ€ì‘ì´ í•„ìš”í•©ë‹ˆë‹¤.`,
      `ì‘ê¸‰ ìƒí™© ${number}: ê¸´ê¸‰ ì¡°ì¹˜ ì¤‘ì…ë‹ˆë‹¤.`,
      `ìœ„ê¸‰ ${number}: ì‹œìŠ¤í…œ ë³µêµ¬ ì‘ì—… ì¤‘ì…ë‹ˆë‹¤.`,
      `ê¸´ê¸‰ ì•Œë¦¼ ${number}: ì„œë¹„ìŠ¤ ì¥ì•  ëŒ€ì‘ ì¤‘ì…ë‹ˆë‹¤.`
    ],
    update: [
      `ì—…ë°ì´íŠ¸ ${number}: ìƒˆë¡œìš´ ë²„ì „ì´ ì¶œì‹œë˜ì—ˆìŠµë‹ˆë‹¤.`,
      `íŒ¨ì¹˜ ${number}: ê°œì„ ì‚¬í•­ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.`,
      `ë²„ì „ ${number}: ì—…ê·¸ë ˆì´ë“œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.`,
      `ë¦´ë¦¬ì¦ˆ ${number}: ìƒˆë¡œìš´ ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.`
    ],
    promotion: [
      `í”„ë¡œëª¨ì…˜ ${number}: íŠ¹ë³„ í• ì¸ í˜œíƒ!`,
      `ì´ë²¤íŠ¸ ${number}: í•œì • ì‹œê°„ íŠ¹ê°€!`,
      `ì„¸ì¼ ${number}: ë†“ì¹˜ë©´ í›„íšŒí•  ê¸°íšŒ!`,
      `í˜œíƒ ${number}: ë…ì  ë³´ìƒì„ ë°›ìœ¼ì„¸ìš”!`
    ]
  };

  const contents = randomContents[type] || randomContents.announcement;
  return contents[Math.floor(Math.random() * contents.length)];
}

function generateVariation(baseContent, type) {
  const variations = {
    maintenance: [
      "ì„œë¹„ìŠ¤ í’ˆì§ˆ í–¥ìƒì„ ìœ„í•œ ì ê²€ì„ ì§„í–‰í•©ë‹ˆë‹¤.",
      "ì‹œìŠ¤í…œ ì•ˆì •ì„± í™•ë³´ë¥¼ ìœ„í•´ ì ê²€ì„ ì‹¤ì‹œí•©ë‹ˆë‹¤.",
      "ë” ë‚˜ì€ ê²Œì„ í™˜ê²½ ì œê³µì„ ìœ„í•œ ì ê²€ ì‘ì—…ì…ë‹ˆë‹¤.",
      "ì„œë²„ ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•œ ì ê²€ì„ ì§„í–‰í•©ë‹ˆë‹¤.",
      "ë³´ì•ˆ ê°•í™” ë° ì•ˆì •ì„± í–¥ìƒì„ ìœ„í•œ ì ê²€ì…ë‹ˆë‹¤."
    ],
    event: [
      "íŠ¹ë³„í•œ ì´ë²¤íŠ¸ê°€ ì§„í–‰ë©ë‹ˆë‹¤! ë†“ì¹˜ì§€ ë§ˆì„¸ìš”!",
      "í•œì • ì‹œê°„ ì´ë²¤íŠ¸ê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤!",
      "ë…ì  ë³´ìƒì„ íšë“í•  ìˆ˜ ìˆëŠ” ê¸°íšŒì…ë‹ˆë‹¤!",
      "ì´ë²ˆ ì£¼ íŠ¹ë³„ ì´ë²¤íŠ¸ì— ì°¸ì—¬í•´ë³´ì„¸ìš”!",
      "ì‹œì¦Œ í•œì • ì´ë²¤íŠ¸ê°€ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤!"
    ],
    announcement: [
      "ì¤‘ìš”í•œ ì—…ë°ì´íŠ¸ ì†Œì‹ì„ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.",
      "ìƒˆë¡œìš´ ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.",
      "ê²Œì„ ì‹œìŠ¤í…œì´ ê°œì„ ë˜ì—ˆìŠµë‹ˆë‹¤.",
      "í”Œë ˆì´ì–´ ê²½í—˜ í–¥ìƒì„ ìœ„í•œ ì—…ë°ì´íŠ¸ì…ë‹ˆë‹¤.",
      "ì»¤ë®¤ë‹ˆí‹° í”¼ë“œë°±ì„ ë°˜ì˜í•œ ê°œì„ ì‚¬í•­ì…ë‹ˆë‹¤."
    ]
  };

  const typeVariations = variations[type] || variations.announcement;
  return typeVariations[Math.floor(Math.random() * typeVariations.length)];
}

async function main() {
  let connection;
  
  try {
    // ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°
    connection = await mysql.createConnection({
      host: process.env.DB_HOST || 'localhost',
      user: process.env.DB_USER || 'root',
      password: process.env.DB_PASSWORD || '',
      database: process.env.DB_NAME || 'uwo_gate'
    });

    console.log('ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°ë˜ì—ˆìŠµë‹ˆë‹¤.');

    // ê¸°ì¡´ í…œí”Œë¦¿ ìˆ˜ í™•ì¸
    const [existingCount] = await connection.execute(
      'SELECT COUNT(*) as count FROM g_message_templates'
    );
    console.log(`ê¸°ì¡´ í…œí”Œë¦¿ ìˆ˜: ${existingCount[0].count}`);

    // ê´€ë¦¬ì ì‚¬ìš©ì ID ê°€ì ¸ì˜¤ê¸°
    const [users] = await connection.execute(
      'SELECT id FROM g_users WHERE role = "admin" LIMIT 1'
    );
    
    if (users.length === 0) {
      console.error('ê´€ë¦¬ì ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
      return;
    }

    const adminUserId = users[0].id;
    console.log(`ê´€ë¦¬ì ì‚¬ìš©ì ID: ${adminUserId}`);

    // 1000ê°œì˜ í…œí”Œë¦¿ ìƒì„±
    const templates = generateAdditionalTemplates();
    
    // 1000ê°œê¹Œì§€ ì œí•œ
    const templatesTo1000 = templates.slice(0, 1000);
    
    console.log(`${templatesTo1000.length}ê°œì˜ í…œí”Œë¦¿ì„ ìƒì„±í•©ë‹ˆë‹¤...`);

    // ë°°ì¹˜ë¡œ ì‚½ì… (100ê°œì”©)
    const batchSize = 100;
    let inserted = 0;

    for (let i = 0; i < templatesTo1000.length; i += batchSize) {
      const batch = templatesTo1000.slice(i, i + batchSize);
      
      const values = batch.map(template => [
        template.name,
        template.type,
        true, // isEnabled
        false, // supportsMultiLanguage
        template.content, // defaultMessage
        adminUserId, // createdBy
        adminUserId, // updatedBy
        new Date(),
        new Date()
      ]);

      await connection.query(
        `INSERT INTO g_message_templates 
         (name, type, isEnabled, supportsMultiLanguage, defaultMessage, createdBy, updatedBy, createdAt, updatedAt) 
         VALUES ?`,
        [values]
      );

      inserted += batch.length;
      console.log(`${inserted}/${templatesTo1000.length} í…œí”Œë¦¿ ì‚½ì… ì™„ë£Œ`);
    }

    console.log('âœ… ëª¨ë“  ë©”ì‹œì§€ í…œí”Œë¦¿ì´ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!');

  } catch (error) {
    console.error('âŒ ì˜¤ë¥˜ ë°œìƒ:', error);
  } finally {
    if (connection) {
      await connection.end();
      console.log('ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
    }
  }
}

if (require.main === module) {
  main();
}

module.exports = { generateAdditionalTemplates, generateVariation };
