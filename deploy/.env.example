# Gatrix Docker Swarm Configuration
# Copy this file to .env and update values for your environment

# ==============================================
# Version & Deployment
# ==============================================
GATRIX_VERSION=1.0.0

# ==============================================
# Network Ports
# ==============================================
HTTP_PORT=80
HTTPS_PORT=443

# ==============================================
# Database Configuration
# ==============================================
DB_NAME=gatrix
DB_USER=gatrix_user

# Secrets (used during --init to create Docker secrets)
DB_ROOT_PASSWORD=your-secure-root-password
DB_PASSWORD=your-secure-db-password

# Chat database
CHAT_DB_NAME=gatrix_chat

# ==============================================
# Redis Configuration
# ==============================================
REDIS_PASSWORD=your-redis-password

# ==============================================
# Security Secrets
# ==============================================
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_REFRESH_SECRET=your-super-secret-refresh-key-change-in-production
SESSION_SECRET=your-super-secret-session-key-change-in-production
GATRIX_API_SECRET=shared-secret-between-servers
EDGE_API_TOKEN=gatrix-unsecured-server-api-token

# ==============================================
# Grafana
# ==============================================
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=your-secure-grafana-password

# ==============================================
# Application Settings
# ==============================================
DEFAULT_LANGUAGE=ko
VITE_APP_NAME=Gatrix
VITE_DEFAULT_LANGUAGE=ko

# ==============================================
# Service Discovery
# ==============================================
SERVICE_DISCOVERY_MODE=redis
# SERVICE_DISCOVERY_MODE=etcd
# ETCD_HOSTS=http://etcd:2379

# ==============================================
# Scaling Configuration
# ==============================================
# Number of replicas for each service
BACKEND_REPLICAS=2
FRONTEND_REPLICAS=2
EVENT_LENS_REPLICAS=1
EVENT_LENS_WORKER_REPLICAS=2
CHAT_SERVER_REPLICAS=2
EDGE_REPLICAS=2

# ==============================================
# Chat Server Configuration
# ==============================================
CHAT_BROADCAST_BATCH_SIZE=1000
CHAT_WS_MAX_CONNECTIONS=10000

# ==============================================
# Event Lens Worker Configuration
# ==============================================
WORKER_BATCH_SIZE=1000
WORKER_BATCH_TIMEOUT=5000
WORKER_CONCURRENCY=10

# ==============================================
# Edge Server Configuration
# ==============================================
EDGE_LOG_LEVEL=info
EDGE_APPLICATION_NAME=edge-server
EDGE_CACHE_SYNC_METHOD=polling
EDGE_CACHE_POLLING_INTERVAL_MS=60000

# ==============================================
# Monitoring
# ==============================================
PROM_RETENTION_TIME=14d

